!function(){"use strict";function e(e,t){var r;for(r=t;r&&(1!==r.nodeType||!n(r,e));r=r.parentNode);return r}function t(e){return Array.isArray(e)?e:Array.prototype.slice.call(e)}function r(e,r){return t((r||document).querySelectorAll(e))}function n(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class"))}function o(e,t){t.split(" ").forEach(function(t){n(e,t)||e.setAttribute("class",e.getAttribute("class")+" "+t)})}function i(e,t){t.split(" ").forEach(function(t){var r=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");n(e,t)&&e.setAttribute("class",r)})}function a(e,t){n(e,t)?i(e,t):o(e,t)}function s(e){(e=t(e)).forEach(function(e){i(e,"is-active")})}function c(){}function u(){i(document.querySelector("html"),"js-is-inactive")}function l(){var e=document.location.pathname+"/";"/map/"===(e=e.replace("//","/"))?E.emit("set:view","map"):"/text/"===e?E.emit("set:view","text"):E.emit("set:view","split"),E.emit("routing:done")}function p(){return"click"}function d(e,t,r){return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):void 0}function f(e,t,r){return e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent?e.detachEvent("on"+t,r):void 0}function m(e){if(e.preventDefault)return e.preventDefault();e.returnValue&&(e.returnValue=!1)}function h(e){var t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}function w(e){e.forEach(function(e){e&&e.setAttribute("aria-hidden",!0)})}function y(e){e.forEach(function(e){e&&e.removeAttribute("aria-hidden")})}function v(){function t(){return[]}function a(e){if(E.emit("modal:close"),e){var r=document.querySelector('.js-modal[data-modal="'+e+'"]');r.removeAttribute("tabindex"),d(document,"focusin",l),o(r,"is-active"),w(t()),r.focus()}}function c(e){if(!e)return s(g);var r=document.querySelector('.js-modal[data-modal="'+e+'"]');i(r,"is-active"),r.setAttribute("tabindex",0),f(document,"focusin",l),y(t())}function u(e){e?d(e,p(),h):v.forEach(function(e){d(e,p(),h)})}function l(t){e("js-modal",t.target)||g.forEach(function(e){n(e,"is-active")&&e.focus()})}function h(e){m(e);var t=e.target.dataset.modal;E.emit("modal:open",t)}var v=r(".js-modal-toggle"),g=r(".js-modal");E.on("modal:open",a),E.on("keyboard:escape",c),E.on("modal:close",c),E.on("modal:bind",u),E.emit("modal:bind")}function g(){function t(e){var t=document.querySelector('.js-drawer[data-drawer="'+e.id+'"]');if(t&&!n(t,"is-active")){E.emit("drawer:close");var r=n(t,"drawer-right"),i=n(t,"drawer-left");t.setAttribute("tabindex",0),o(t,"is-active"),r?o(v,"drawer-right-is-active"):i&&o(v,"drawer-left-is-active"),w([v]),d(t,p(),u),d(document,"focusin",s)}else E.emit("drawer:close")}function a(e){if(e){var t=document.querySelector('.js-drawer[data-drawer="'+e.id+'"]');t.removeAttribute("tabindex"),i(t,"is-active")}else b.forEach(function(e){e.removeAttribute("tabindex"),i(e,"is-active")});i(v,"drawer-left-is-active"),i(v,"drawer-right-is-active"),g.forEach(function(e){i(e,"is-active")}),y([v]),f(document,"focusin",s),h&&h.focus()}function s(t){e("js-drawer",t.target)||b.forEach(function(e){n(e,"is-active")&&e.focus()})}function c(e){e?d(e.node,p(),l):g.forEach(function(e){d(e,p(),l)})}function u(e){n(e.target,"js-drawer")&&E.emit("drawer:close"),n(e.target,"js-drawer-close")&&E.emit("drawer:close")}function l(e){m(e);var t=e.target.getAttribute("data-drawer");E.emit("drawer:open",{id:t})}var h,v=document.querySelector(".js-panels"),g=r(".js-drawer-toggle"),b=r(".js-drawer");E.on("drawer:open",t),E.on("keyboard:escape",a),E.on("drawer:close",a),E.on("drawer:bind",c),E.emit("drawer:bind")}function b(e){return bt.startTag+e+bt.endTag}function T(e,t){var r=e.split(" ");r=(r=(r=r.filter(function(e){return""!==e})).join("|")).replace(/[-[\]{}()*+?.,\\^$]/g,"\\$&");var n=new RegExp(r,"gi");return t.replace(n,b)}function S(){E.on("search:index",St),E.on("search:bind",At),E.on("search:for",_t),E.on("search:render",jt),E.on("search:cancel",Ct),E.on("search:for",Et),E.on("search:result",Nt),E.emit("search:index"),E.emit("search:bind")}c.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){function n(){o.off(e,n),t.apply(r,arguments)}var o=this;return n._=t,this.on(e,n,r)},emit:function(e){var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=r.length;for(n;n<o;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],o=[];if(n&&t)for(var i=0,a=n.length;i<a;i++)n[i].fn!==t&&n[i].fn._!==t&&o.push(n[i]);return o.length?r[e]=o:delete r[e],this}};var E=new c;E.on("has:javascript",u);"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var P=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t,r){e.exports=function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n=r(1).isInBrowser,o=new(r(2))(n?document.body:null);o.setStateFromDOM(null),o.listenToDOM(),n&&(window.scrollMonitor=o),e.exports=o},function(e,t){t.VISIBILITYCHANGE="visibilityChange",t.ENTERVIEWPORT="enterViewport",t.FULLYENTERVIEWPORT="fullyEnterViewport",t.EXITVIEWPORT="exitViewport",t.PARTIALLYEXITVIEWPORT="partiallyExitViewport",t.LOCATIONCHANGE="locationChange",t.STATECHANGE="stateChange",t.eventTypes=[t.VISIBILITYCHANGE,t.ENTERVIEWPORT,t.FULLYENTERVIEWPORT,t.EXITVIEWPORT,t.PARTIALLYEXITVIEWPORT,t.LOCATIONCHANGE,t.STATECHANGE],t.isOnServer="undefined"==typeof window,t.isInBrowser=!t.isOnServer,t.defaultOffsets={top:0,bottom:0}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return c?0:e===document.body?window.innerHeight||document.documentElement.clientHeight:e.clientHeight}function i(e){return c?0:e===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):e.scrollHeight}function a(e){return c?0:e===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop}var s=r(1),c=s.isOnServer,u=s.isInBrowser,l=s.eventTypes,p=r(3),d=function(){function e(t,r){function s(){if(u.viewportTop=a(t),u.viewportBottom=u.viewportTop+u.viewportHeight,u.documentHeight=i(t),u.documentHeight!==p){for(d=u.watchers.length;d--;)u.watchers[d].recalculateLocation();p=u.documentHeight}}function c(){for(f=u.watchers.length;f--;)u.watchers[f].update();for(f=u.watchers.length;f--;)u.watchers[f].triggerCallbacks()}n(this,e);var u=this;this.item=t,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=i(t),this.viewportHeight=o(t),this.DOMListener=function(){e.prototype.DOMListener.apply(u,arguments)},this.eventTypes=l,r&&(this.containerWatcher=r.create(t));var p,d,f;this.update=function(){s(),c()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return e.prototype.listenToDOM=function(){u&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener):this.item.addEventListener("scroll",this.DOMListener),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},e.prototype.destroy=function(){},e.prototype.DOMListener=function(e){this.setStateFromDOM(e)},e.prototype.setStateFromDOM=function(e){var t=a(this.item),r=o(this.item),n=i(this.item);this.setState(t,r,n,e)},e.prototype.setState=function(e,t,r,n){var o=this,i=t!==this.viewportHeight||r!==this.contentHeight;if(this.latestEvent=n,this.viewportTop=e,this.viewportHeight=t,this.viewportBottom=e+t,this.contentHeight=r,i)for(var a=this.watchers.length;a--;)o.watchers[a].recalculateLocation();this.updateAndTriggerWatchers(n)},e.prototype.updateAndTriggerWatchers=function(e){for(var t=this,r=this.watchers.length;r--;)t.watchers[r].update();for(r=this.watchers.length;r--;)t.watchers[r].triggerCallbacks(e)},e.prototype.createCustomContainer=function(){return new e},e.prototype.createContainer=function(t){"string"==typeof t?t=document.querySelector(t):t&&t.length>0&&(t=t[0]);var r=new e(t,this);return r.setStateFromDOM(),r.listenToDOM(),r},e.prototype.create=function(e,t){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var r=new p(this,e,t);return this.watchers.push(r),r},e.prototype.beget=function(e,t){return this.create(e,t)},e}();e.exports=d},function(e,t,r){function n(e,t,r){function n(e,t){if(0!==e.length)for(b=e.length;b--;)(T=e[b]).callback.call(o,t,o),T.isOne&&e.splice(b,1)}var o=this;this.watchItem=t,this.container=e,this.offsets=r?r===+r?{top:r,bottom:r}:{top:r.top||f.top,bottom:r.bottom||f.bottom}:f,this.callbacks={};for(var m=0,h=d.length;m<h;m++)o.callbacks[d[m]]=[];this.locked=!1;var w,y,v,g,b,T;this.triggerCallbacks=function(e){switch(this.isInViewport&&!w&&n(this.callbacks[a],e),this.isFullyInViewport&&!y&&n(this.callbacks[s],e),this.isAboveViewport!==v&&this.isBelowViewport!==g&&(n(this.callbacks[i],e),y||this.isFullyInViewport||(n(this.callbacks[s],e),n(this.callbacks[u],e)),w||this.isInViewport||(n(this.callbacks[a],e),n(this.callbacks[c],e))),!this.isFullyInViewport&&y&&n(this.callbacks[u],e),!this.isInViewport&&w&&n(this.callbacks[c],e),this.isInViewport!==w&&n(this.callbacks[i],e),!0){case w!==this.isInViewport:case y!==this.isFullyInViewport:case v!==this.isAboveViewport:case g!==this.isBelowViewport:n(this.callbacks[p],e)}w=this.isInViewport,y=this.isFullyInViewport,v=this.isAboveViewport,g=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var e=this.top,t=this.bottom;if(this.watchItem.nodeName){var r=this.watchItem.style.display;"none"===r&&(this.watchItem.style.display="");for(var o=0,i=this.container;i.containerWatcher;)o+=i.containerWatcher.top-i.containerWatcher.container.viewportTop,i=i.containerWatcher.container;var a=this.watchItem.getBoundingClientRect();this.top=a.top+this.container.viewportTop-o,this.bottom=a.bottom+this.container.viewportTop-o,"none"===r&&(this.watchItem.style.display=r)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===e&&void 0===t||this.top===e&&this.bottom===t||n(this.callbacks[l],null)}},this.recalculateLocation(),this.update(),w=this.isInViewport,y=this.isFullyInViewport,v=this.isAboveViewport,g=this.isBelowViewport}var o=r(1),i=o.VISIBILITYCHANGE,a=o.ENTERVIEWPORT,s=o.FULLYENTERVIEWPORT,c=o.EXITVIEWPORT,u=o.PARTIALLYEXITVIEWPORT,l=o.LOCATIONCHANGE,p=o.STATECHANGE,d=o.eventTypes,f=o.defaultOffsets;n.prototype={on:function(e,t,r){switch(!0){case e===i&&!this.isInViewport&&this.isAboveViewport:case e===a&&this.isInViewport:case e===s&&this.isFullyInViewport:case e===c&&this.isAboveViewport&&!this.isInViewport:case e===u&&this.isInViewport&&this.isAboveViewport:if(t.call(this,this.container.latestEvent,this),r)return}if(!this.callbacks[e])throw new Error("Tried to add a scroll monitor listener of type "+e+". Your options are: "+d.join(", "));this.callbacks[e].push({callback:t,isOne:r||!1})},off:function(e,t){var r=this;if(!this.callbacks[e])throw new Error("Tried to remove a scroll monitor listener of type "+e+". Your options are: "+d.join(", "));for(var n,o=0;n=this.callbacks[e][o];o++)if(n.callback===t){r.callbacks[e].splice(o,1);break}},one:function(e,t){this.on(e,t,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var e=this.container.watchers.indexOf(this),t=this;this.container.watchers.splice(e,1);for(var r=0,n=d.length;r<n;r++)t.callbacks[d[r]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var m=0,h=d.length;m<h;m++){var w=d[m];n.prototype[w]=function(e){return function(t,r){this.on.call(this,e,t,r)}}(w)}e.exports=n}])}()}()}),M=function(){function e(e){E.emit("layers:draw")}r(".js-layer-toggle").forEach(function(t){d(t,"click",e)})},A=function(){function e(e){e.preventDefault(),E.emit("layer:control")}r(".js-layer-control").forEach(function(t){d(t,"click",e)})},_=function(){function e(e){e.preventDefault();var t=e.target.getAttribute("data-panel");E.emit("set:view",t)}r(".js-view-control").forEach(function(t){d(t,"click",e)})},j=function(){function e(e){e.preventDefault(),E.emit("popup:close")}r(".js-close-popup").forEach(function(t){d(t,"click",e)})},C=function(){function e(e){27===e.keyCode?E.emit("keyboard:escape"):13===e.keyCode?E.emit("keyboard:return"):32===e.keyCode?E.emit("keyboard:space"):38===e.keyCode?E.emit("keyboard:arrow:up"):40===e.keyCode?E.emit("keyboard:arrow:down"):37===e.keyCode?E.emit("keyboard:arrow:left"):39===e.keyCode?E.emit("keyboard:arrow:right"):9===e.keyCode&&E.emit("keyboard:tab")}d(document,"keyup",e)},k=function(){function e(){var e=t.offsetWidth;e>785?E.emit("type:size","large"):e>599?E.emit("type:size","medium"):e<600&&E.emit("type:size","small")}window.onresize=e;var t=document.querySelector(".js-text-area")},I=function(){E.emit("bind:layer:toggles"),E.emit("bind:layer:controllers"),E.emit("bind:view:controller"),E.emit("bind:scroll:watcher"),E.emit("bind:popup:closers"),E.emit("bind:keyup"),E.emit("bind:window:resize")},N=function(){E.on("bind:layer:toggles",M),E.on("bind:layer:controllers",A),E.on("bind:view:controller",_),E.on("bind:popup:closers",j),E.on("bind:keyup",C),E.on("bind:window:resize",k),E.on("bind:intent",I),E.emit("bind:intent")};Math.easeInOutQuad=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)},Math.easeInCubic=function(e,t,r,n){return t+r*((e/=n)*e*e)},Math.inOutQuintic=function(e,t,r,n){var o=(e/=n)*e,i=o*e;return t+r*(6*i*o+-15*o*o+10*i)};var O,B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),D=function(e,t,r,n){function o(t){e.scrollTop=t}var i=function(){return e.scrollTop}(),a=t-i,s=0;n=void 0===n?500:n;var c=function(){s+=20,o(Math.easeInOutQuad(s,i,a,n)),s<n?B(c):r&&"function"==typeof r&&r()};c()},R=function(e){void 0===e&&(e=document);var t=document.querySelector(".js-text-area");Array.apply(void 0,e.querySelectorAll("a")).filter(function(e){return"#"==e.attributes.href.value.charAt(0)}).forEach(function(e){var r=e.attributes.href.value;e.addEventListener("click",function(e){e.preventDefault(),console.log(r);var n=h(document.querySelector(r))-60;D(t,n)})})},V=function(e,t){var r=document.querySelector(".js-pop-up"),n=document.querySelector(".js-template");r.querySelectorAll(".js-multiple-popups").forEach(function(e){console.log("remove plz?"),e.remove()}),console.log(r.querySelectorAll(".js-multiple-popups")),o(r,"is-active"),e.feature?n.innerHTML=t(e.feature.properties):n.innerHTML=t(e.features[0].properties),R(n)},F=function(e,t,r){var n=document.querySelector(".js-pop-up"),o=document.querySelector(".js-template");n.querySelectorAll(".js-multiple-popups").forEach(function(e){e.remove()}),n.classList.add("has-multiple"),console.log("make some buttons"),o.insertAdjacentHTML("beforebegin",'\n    <div class="popup-buttons js-multiple-popups" data-feature='+(e.length-1)+'>\n      <button class="js-prev-popup pt6">←</button>\n      <button class="js-next-popup pt6"> →</button>\n    </div>\n  ');var i=e.map(function(e){return t(e.feature.properties)}),a=n.querySelector(".js-prev-popup"),s=n.querySelector(".js-next-popup"),c=n.querySelector(".js-multiple-popups");a.addEventListener("click",function(t){t.preventDefault();var n,a=parseInt(c.getAttribute("data-feature"));n=a-1<0?e.length-1:a-1,c.setAttribute("data-feature",n),r.features.resetStyle(),o.innerHTML=i[n],e[n].setStyle({lineCap:"round",weight:24,color:"#98CBCC"})}),s.addEventListener("click",function(t){t.preventDefault();var n,a=parseInt(c.getAttribute("data-feature"));n=a+1>e.length-1?0:a+1,c.setAttribute("data-feature",n),r.features.resetStyle(),o.innerHTML=i[n],e[n].setStyle({lineCap:"round",weight:24,color:"#98CBCC"})})},q=function(){var e=document.querySelector(".js-pop-up");e.querySelectorAll(".js-multiple-popups").forEach(function(e){e.remove()}),i(e,"is-active"),E.emit("popup:closed")},H=function(e){var t=document.querySelector(".js-panels");n(t,"text-is-active")&&i(t,"text-is-active"),n(t,"map-is-active")&&i(t,"map-is-active"),n(t,"split-is-active")&&i(t,"split-is-active"),o(t,e+"-is-active"),"map"===e|"split"===e&&Y()},x=function(e){"split"===e&&(e="/"),window.history.replaceState&&window.history.replaceState(null,null,e)},z=function(){var e=document.querySelector(".js-layer-control-panel"),t=document.querySelector(".js-layer-control");a(e,"is-active"),a(t,"is-active")},W=function(){},Y=function(){setTimeout(function(){E.emit("map:redraw")},300)},Z=function(){i(document.querySelector("html"),"is-loading")},G=function(){E.on("set:view",H),E.on("set:view",x),E.on("layer:control",z),E.on("keyboard:escape",W),E.on("keyboard:escape",q),E.on("popup:opened",V),E.on("popup:nested",F),E.on("popup:close",q),E.on("popup:leafletclosed",q),E.on("routing:done",Z)},U={Design:{CIMS:"Civic Main Streets",NMS:"Neighborhood Main Streets",CIC:"Civic Corridors",NC:"Neighborhood Corridors",RC:"Regional Corridors",CC:"Community Corridors",UT:"Urban Throughways",IR:"Industrial Roads",EGC:"Enhanced Greenway Corridors",GS:"Greenscape Streets",LS:"Local Streets","N/A":"No Class",UNK:"Unknown"},Bicycle:{MCB:"Major City Bikeways",CB:"City Bikeways",LS:"Local Service Bikeways",BD:"Bicycle Districts",OSP:"Off-Street Paths","N/A":"No Class",UNK:"Unknown"},Transit:{RT:"Regional Transitways",RTMTP:"Major Transit Priority Streets",MTP:"Major Transit Priority Streets",TA:"Transit Access Streets",LS:"Local Service Transit Streets",IPR:"Intercity Passenger Rail","N/A":"No Class",UNK:"Unknown"},Traffic:{RTMCT:"Regional Trafficways",MCT:"Major City Traffic Streets",TA:"Traffic Access Streets",DC:"District Collectors",NC:"Neighborhood Collectors",LS:"Local Service Traffic Streets","N/A":"No Class",UNK:"Unknown"},Emergency:{MAJ:"Major Emergency Response Streets",MIN:"Minor Emergency Response Streets",PRIMARY:"Secondary Emergency Response Streets",SECOND:"Secondary Emergency Response Streets","N/A":"No Class",UNK:"Unknown"},Pedestrian:{PD:"Pedestrian Districts",CCTP:"Pedestrian-Transit Streets",CW:"City Walkways",OSP:"Off-Street Paths",LS:"Local Service Walkways","N/A":"No Class",UNK:"Unknown"},Freight:{RT:"Regional Truckways",PT:"Priority Truck Streets",MT:"Major Truck Streets",TA:"Truck Access Streets",LS:"Local Service Truck Streets",FD:"Freight Districts",RML:"Railroad Main Lines",RBL:"Railroad Branch Lines",FF:"Freight Facilities","N/A":"No Class",UNK:"Unknown"}},K=function(e,t){return console.log(e,t),function(t){return console.debug("feature:",t),console.debug("current:",e),'\n      <h5 class="flush-top">\n        '+t.StreetName+'\n      </h5>\n      <table class="flush-bottom lead-top">\n        <tbody>\n          <tr>\n            <td>'+e+' Class:</td>\n            <td><a href="#'+(U[e][t[e]]?U[e][t[e]].replace(/ /g,"-").toLowerCase():"")+'">'+t[e]+'</a></td>\n          </tr>\n        </tbody>\n      </table>\n      <p class="lead-top">\n        <b>'+t[e]+':</b>\n        <a href="#'+(U[e][t[e]]?U[e][t[e]].replace(/ /g,"-").toLowerCase():"")+'">'+U[e][t[e]]+"</a>\n      </p>\n    "}},X=function(e,t){return function(t){return console.log(t),console.log(e),'\n      <h5 class="flush-top">\n        '+e+' District\n      </h5>\n      <table class="flush-bottom lead-top">\n        <tbody>\n          <tr>\n            <td><a href="#'+e.replace(/ /g,"-").toLowerCase()+'-districts">'+e+" Districts</a></td>\n          </tr>\n        </tbody>\n      </table>\n    "}},$=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},Q=function(e,t){return function(e){return'\n      <h5 class="flush-top">\n        '+e.ProjectName+"\n      </h5>\n      <p> "+e.ProjectDescription+' </p>\n      <table class="lead-bottom lead-top">\n        <tbody>\n          <tr>\n            <td>Status</td>\n            <td>'+e.ProjectStatus+"</td>\n          </tr>\n          <tr>\n            <td>Lead Agency</td>\n            <td>"+e.LeadAgency+"</td>\n          </tr>\n          <tr>\n            <td>Estimated Cost</td>\n            <td>$"+$(e.EstimatedCost)+"</td>\n          </tr>\n          <tr>\n            <td>Estimated Time Frame</td>\n            <td>"+e.EstimatedTimeframe+"</td>\n          </tr>\n        </tbody>\n      </table>\n      <p>Project Number: "+e.ProjectNumber+"</p>\n    "}},J={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[10]}),pane:"top"},ee={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/10",pane:"top",minZoom:15}),pane:"top",popup:K("Design")},te={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[12]})},re={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/12",pane:"top",minZoom:15}),pane:"top",popup:K("Bicycle")},ne={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[13],style:function(e){return{fillOpacity:.5}}})},oe={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/13",pane:"bottom",minZoom:15}),pane:"bottom",popup:X("Bicycle")},ie={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[3]}),pane:"top"},ae={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/3",pane:"top",minZoom:15}),pane:"top",popup:K("Transit")},se={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[4]}),pane:"top"},ce={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/4",pane:"top",minZoom:15}),pane:"top",popup:K("Traffic")},ue={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[7]}),pane:"top"},le={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/7",pane:"top",minZoom:15}),pane:"top",popup:K("Emergency")},pe={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[15],pane:"top"}),pane:"top"},de={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/15",pane:"top",minZoom:15}),pane:"top",popup:K("Pedestrian")},fe={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[16],pane:"bottom",style:function(e){return{fillOpacity:.5}}}),pane:"bottom"},me={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/16",pane:"bottom",minZoom:15}),pane:"bottom",popup:X("Pedestrian`")},he={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[19]})},we={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/19",pane:"top",minZoom:15}),pane:"top",popup:K("Freight")},ye={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[20],style:function(e){return{fillOpacity:.5}}}),popup:X("Freight")},ve={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/20",pane:"bottom",minZoom:15}),pane:"bottom",popup:X("Freight")},ge={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[18]})},be={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/18",pane:"top",minZoom:15}),pane:"top",popup:K("Freight")},Te={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/22",pane:"top"}),pane:"top",popup:Q()},Se={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/22",pane:"top",where:"EstimatedTimeframe = '1-10_YRS'"}),pane:"top",popup:Q()},Le={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/22",pane:"top",where:"EstimatedTimeframe = '11-20_YRS'"}),pane:"top",popup:Q()},Ee={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/22",pane:"top",where:"EstimatedTimeframe = 'NA'"}),pane:"top",popup:Q()},Pe={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/23",pane:"top"}),pane:"top",popup:Q()},Me={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/23",pane:"top",where:"EstimatedTimeframe = '1-10_YRS'"}),pane:"top",popup:Q()},Ae={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/23",pane:"top",where:"EstimatedTimeframe = '11-20_YRS'"}),pane:"top",popup:Q()},_e={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/23",pane:"top",where:"EstimatedTimeframe = 'NA'"}),pane:"top",popup:Q()},je={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/24",pane:"bottom",style:function(e){return{fillOpacity:.2}}}),pane:"bottom",popup:Q()},Ce={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/24",pane:"bottom",where:"EstimatedTimeframe = '1-10_YRS'",style:function(e){return{fillOpacity:.2}}}),pane:"bottom",popup:Q()},ke={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/24",pane:"bottom",where:"EstimatedTimeframe = '11-20_YRS'",style:function(e){return{fillOpacity:.2}}}),pane:"bottom",popup:Q()},Ie={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer/24",pane:"bottom",where:"EstimatedTimeframe = 'NA'",style:function(e){return{fillOpacity:.2}}}),pane:"bottom",popup:Q()},Ne={features:window.L.esri.featureLayer({url:"https://services.arcgis.com/quVN97tn06YNGj9s/arcgis/rest/services/TSPBikePrograms_temp_2018_03_15/FeatureServer/0",pane:"bottom"}),popup:Q()},Oe={features:window.L.esri.featureLayer({url:"https://services.arcgis.com/quVN97tn06YNGj9s/arcgis/rest/services/TSPBikePrograms_temp_2018_03_15/FeatureServer/1",pane:"bottom"}),popup:Q()},Be={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Basemap_Color/MapServer/8",pane:"bottom",style:function(e){return{fillOpacity:.2}}}),popup:function(e,t){return function(e){return console.log(e),'\n      <h5 class="flush-top">\n        '+e.SITEADDR+"\n      </h5>\n    "}}()},De={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Zoning/MapServer/0",pane:"bottom",style:function(e){return{fillOpacity:.2}}}),popup:function(e,t){return function(e){return console.log(e),'\n      <h5 class="flush-top">\n        '+e.CMP+'\n      </h5>\n      <p class="flush-bottom">\n        <b>Zone:</b>\n        '+e.CMP_DESC+"\n      </p>\n      <p>\n        <b>Overlay:</b>\n        "+(e.OVRLY_DESC||"None")+'\n      </p>\n      <p class="lead-bottom">\n\n      </p>\n    '}}()},Re={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/46",pane:"bottom",style:function(e){return{fillOpacity:.2}}}),popup:function(e,t){return function(e){return'\n      <h5 class="flush-top">\n        '+e.NAME+"\n      </h5>\n    "}}()},Ve={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/44",pane:"bottom"}),popup:function(e,t){return function(e){return'\n      <h5 class="flush-top">\n        '+e.LOCATION+"\n      </h5>\n    "}}()},Fe={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/2",pane:"bottom"}),popup:Q()},qe={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/3",pane:"bottom"}),popup:Q()},He={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/4",pane:"bottom"}),popup:Q()},xe={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/5",pane:"bottom"}),popup:Q()},ze={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/6",pane:"bottom"}),popup:Q()},We=Object.freeze({Design:J,DesignFeatures:ee,BicycleClassifications:te,BicycleFeatures:re,BicycleDistricts:ne,BicycleDistrictFeatures:oe,Transit:ie,TransitFeatures:ae,Traffic:se,TrafficFeatures:ce,Emergency:ue,EmergencyFeatures:le,PedestrianClassifications:pe,PedestrianFeatures:de,PedestrianDistricts:fe,PedestrianDistrictFeatures:me,FreightClassifications:he,FreightFeatures:we,FreightDistricts:ye,FreightDistrictFeatures:ve,FreightFacilities:ge,FreightFacillitiesFeatures:be,ProjectPoints:Te,ProjectPointsTen:Se,ProjectPointsTwenty:Le,ProjectPointsOther:Ee,ProjectLines:Pe,ProjectLinesTen:Me,ProjectLinesTwenty:Ae,ProjectLinesOther:_e,ProjectPolygons:je,ProjectPolygonsTen:Ce,ProjectPolygonsTwenty:ke,ProjectPolygonsOther:Ie,bikeProgram:Ne,greenwayProgram:Oe,taxlots:Be,zoning:De,centers:Re,corridors:Ve,centersRegional:Fe,centersTown:qe,centersNeighborhood:He,corridorsCivic:xe,corridorsNeighborhood:ze}),Ye={center:[45.528,-122.63],zoom:12},Ze=L.Control.Zoom.extend({options:{position:"topright",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"Zoom min",zoomMinTitle:"Zoom min"},onAdd:function(e){var t="leaflet-control-zoom",r=L.DomUtil.create("div",t+" leaflet-bar"),n=this.options;return this._map=e,this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",r,this._zoomIn,this),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",r,this._zoomOut,this),this._zoomMinButton=this._createButton(n.zoomMinText,n.zoomMinTitle,t+"-min",r,this._zoomMin,this),r},_zoomMin:function(){this._map.flyTo(Ye.center,Ye.zoom)}}),Ge={center:[45.528,-122.63],zoom:12},Ue=function(){O=window.L.map("map",{trackResize:!0,center:Ge.center,minZoom:12,zoom:Ge.zoom,zoomControl:!1,scrollWheelZoom:!0}),window.map=O,O.createPane("bottom"),O.createPane("top"),window.L.esri.basemapLayer("Gray").addTo(O),O.on("moveend",function(){Ge.center=O.getCenter(),Ge.zoom=O.getZoom()}),Ke()},Ke=function(){O.addControl(new Ze);window.L.esri.Geocoding.geocodeServiceProvider({url:"https://www.portlandmaps.com/locator/Default/GeocodeServer"});var e=L.esri.Geocoding.geosearch({position:"topright",zoomToResult:!0,allowMultipleResults:!1,searchBounds:L.latLngBounds([[45.6574694,-122.8695448],[45.3309588,-122.4284356]])}).addTo(O),t=L.layerGroup().addTo(O);e.on("results",function(e){t.clearLayers(),t.addLayer(L.marker(e.results[0].latlng)),O.setZoom(0),Ge.zoom=0})},Xe=function(){return r(".js-layer-toggle").filter(function(e){return e.checked})},$e=function(){return r(".js-layer-toggle").filter(function(e){return!e.checked})},Qe=function(e){e&&(e=e.replace(/ /g,"")).split(",").forEach(function(e){return et(e)})},Je=function(e,t){t.features.query().nearby(e,10).ids(function(e,r){if(r){var n=r.map(function(e){return t.features.getFeature(e)}).filter(function(e){return e});n.length>1?E.emit("popup:nested",n,t.popup,t):E.emit("popup:single",n,t.popup,t)}})},et=function(e){We[e]&&(console.log(We[e].features),We[e].features.addTo(O),We[e].features.legend(function(e,t){e||1!=t.layers.length||E.emit("layer:legend",t.layers[0])}),E.emit("layer:reset",e),We[e].features.on("click",function(t){Je(t.latlng,We[e])}),We[e].features.bindPopup(function(t){var r;return t&&(t.feature||We[e].features.query().nearby(t._latlng,10).ids(function(n,o){if(o){var i=o.map(function(t){return We[e].features.getFeature(t)}).filter(function(e){return e});r=i[0].feature,t.feature?t.feature=t.feature:t.feature=r,tt(t,e)}}),t.bringToFront&&We[e].popup&&(t.bringToFront(),t.setStyle({lineCap:"round",weight:24,color:"#98CBCC"}),tt(t,e))),"hey"}).on("popupclose",function(){E.emit("layer:reset",e)}))},tt=function(e,t){E.emit("popup:opened",e,We[t].popup)},rt=function(e){We[e].features.resetStyle&&We[e].features.resetStyle()},nt=function(e){e&&(e=e.replace(/ /g,"")).split(",").forEach(function(e){return ot(e)})},ot=function(e){We[e]&&(We[e].features.removeFrom(O),We[e].features.unbindPopup())},it=function(){var e=Xe();E.emit("map:legend",e),e.forEach(function(e){var t=e.getAttribute("data-layers");E.emit("map:layer:add",t)}),$e().forEach(function(e){var t=e.getAttribute("data-layers");E.emit("map:layer:remove",t)})},at=function(){O&&O.remove()},st=function(){E.emit("map:destroy"),E.emit("map:create")},ct=function(){O.closePopup()},ut=function(e){O.fitBounds(e)},lt=function(e,t){O.flyTo(e,t),Ge.zoom=t},pt=function(e){},dt=function(e){return e.trim().replace(/\s/g,"-")},ft=function(e,t){return'\n  <button class="pt8 button button-clear legend-toggle js-legend-toggle" data-legend="'+dt(e.layerName)+'">\n    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="icon legend-icon"><path d="M10 2l14 14-14 14V2z"/></svg>\n    '+e.layerName+'\n  </button>\n  <ul class="legend-group js-legend-group" data-legend="'+dt(e.layerName)+'">\n    '+e.legend.map(function(e){return'<li>\n        <img width="'+e.height+'" height="'+e.height+'" alt="Symbol" src="data:image/gif;base64,'+e.imageData+'" />\n        '+e.label+"\n      </li>"}).join("")+"\n  </ul>\n"},mt=function(){var e=Array.apply(void 0,document.querySelectorAll(".js-legend-toggle"));Array.apply(void 0,document.querySelectorAll(".js-legend-group")).forEach(function(e){i(e,"is-active")}),e.forEach(function(e){i(e,"is-active")})},ht=function(e){e.preventDefault();var t=n(e.target,"is-active");if(mt(),!t){var r=e.target.getAttribute("data-legend");o(e.target,"is-active"),Array.apply(void 0,document.querySelectorAll(".js-legend-group")).filter(function(e){return e.getAttribute("data-legend")==r}).forEach(function(e){o(e,"is-active")})}},wt=function(){Array.apply(void 0,document.querySelectorAll(".js-legend-toggle")).forEach(function(e){e.addEventListener("click",ht)})},yt=function(e){Array.apply(void 0,document.querySelectorAll(".js-layer-legend")).forEach(function(t){t.insertAdjacentHTML("beforeend",ft(e))}),wt()},vt=function(){Array.apply(void 0,document.querySelectorAll(".js-layer-legend")).forEach(function(e){return e.innerHTML=""})},gt=function(){E.on("popup:opened",pt),E.on("popup:closed",ct),E.on("map:redraw",st),E.on("map:destroy",at),E.on("map:create",Ue),E.on("map:create",it),E.on("map:fitBounds",ut),E.on("map:setFeature",lt),E.on("layers:draw",it),E.on("map:layer:add",Qe),E.on("map:layer:remove",nt),E.on("map:layer:remove",vt),E.on("layer:reset",rt),E.on("layer:legend",yt)},bt={startTag:"<b class='highlight'>",endTag:"</b>"},Tt=T;String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var St=function(){window.content=[];var e=document.querySelector(".js-search-content"),r=t(e.getElementsByTagName("h1")),n=t(e.getElementsByTagName("h2")),o=t(e.getElementsByTagName("h3")),i=t(e.getElementsByTagName("h4")),a=t(e.getElementsByTagName("h5")),s=t(e.getElementsByTagName("h6")),c=t(e.getElementsByTagName("td"));t(e.getElementsByTagName("p"));window.content=window.content.concat(r),window.content=window.content.concat(n),window.content=window.content.concat(o),window.content=window.content.concat(i),window.content=window.content.concat(a),window.content=window.content.concat(s),window.content=window.content.concat(c)},Lt=function(e,t){return!!e.innerHTML&&!!e.innerHTML.toLowerCase().includes(t)},Et=function(e){e=e.toLowerCase();var t=window.content.filter(function(t){return Lt(t,e)});E.emit("search:result",t.length,t,e)},Pt=function(e){m(e);var t=r(".js-search-input",e.target.parentNode)[0].value;E.emit("search:for",t)},Mt=function(e){m(e),r(".js-search-input",e.target.parentNode)[0].value="",E.emit("search:cancel")},At=function(){var e=r(".js-search-submit"),t=r(".js-search-cancel");e.map(function(e){d(e,"click",Pt)}),t.map(function(e){d(e,"click",Mt)})},_t=function(){var e=r(".js-search-loader"),t=r(".js-search-hide"),n=r(".js-search-results");t.forEach(function(e){o(e,"is-hidden")}),e.forEach(function(e){o(e,"is-active")}),n.forEach(function(e){i(e,"is-active")})},jt=function(){var e=r(".js-search-loader"),t=r(".js-search-hide"),n=r(".js-search-results");t.forEach(function(e){o(e,"is-hidden")}),e.forEach(function(e){i(e,"is-active")}),n.forEach(function(e){o(e,"is-active")})},Ct=function(){var e=r(".js-search-loader"),t=r(".js-search-hide"),n=r(".js-search-results");t.forEach(function(e){i(e,"is-hidden")}),e.forEach(function(e){i(e,"is-active")}),n.forEach(function(e){i(e,"is-active")})};window.scrollToPosition=function(e){var t=document.querySelector(".js-text-area");D(t,e-60)};var kt=function(e){for(var t,r=e;"H"!=e.tagName[0];)t=e,(e=e.previousElementSibling)||(e=t.parentNode);return console.log(e.innerHTML,r.innerHTML),e.innerHTML!=r.innerHTML&&e.innerHTML},It=function(e){return e?'<h6 class="search-result-header">'+e+"</h6>":""},Nt=function(e,t,n){var o=r(".js-search-results");document.querySelector(".js-search-content");o.map(function(r){r.innerHTML='\n      <h6 class="search-result-summary">'+e+" results for '"+n+"'</h6>\n    ",t.map(function(e){var t=kt(e),o=h(e),i=e.innerHTML,a=Tt(n,i);r.insertAdjacentHTML("beforeend",'\n        <a class="search-result" onclick="scrollToPosition('+o+')">\n          '+It(t)+'\n          <p class="search-result-preview">'+a+"</p>\n        </a>\n      ")})}),E.emit("search:render")},Ot=document.querySelector(".js-text-area"),Bt=t(Ot.getElementsByTagName("h1")),Dt=(document.querySelector(".js-chapter-nubs"),document.querySelector(".js-nub-list")),Rt=P.createContainer(Ot),Vt={},Ft=function(){Bt.forEach(function(e){Vt[e.id]=Rt.create(e),Vt[e.id].enterViewport(function(){E.emit("nubs:active",e.id),E.emit("breadscrumbs:active",e)})})},qt=function(e){return'\n    <li>\n      <a href="#'+e.href+'"\n         data-nub="'+e.href+'"\n         class="nub\n                js-nub\n                tooltip tooltip-right"\n         aria-label="'+e.text+'">\n      </a>\n    </li>\n  '},Ht=function(){t(Ot.getElementsByTagName("h1")).map(function(e){return{href:e.id,text:e.innerHTML}}).forEach(function(e){var t=qt(e);Dt&&Dt.insertAdjacentHTML("beforeend",t)}),E.emit("nubs:active","top")},xt=function(e){Dt&&t(Dt.querySelectorAll(".js-nub")).forEach(function(t){i(t,"is-active"),t.getAttribute("data-nub")===e&&o(t,"is-active")})},zt=function(){E.on("nubs:draw",Ht),E.on("nubs:draw",Ft),E.on("nubs:active",xt),E.emit("nubs:draw")},Wt=document.querySelector(".js-breadcrumbs"),Yt=function(e){var t='\n    <span class="pt8 nav-top-link">></span>\n    <a href=\'#'+e.id+'\' class="crumb nav-top-link pt10">\n      '+e.innerHTML+"\n    </a>\n  ";Wt.innerHTML="",Wt.insertAdjacentHTML("beforeend",t)},Zt=function(){E.on("breadscrumbs:active",Yt)},Gt=function(){var e=Array.apply(void 0,document.querySelectorAll(".toc ul li ul")),t=Array.apply(void 0,document.querySelectorAll(".toc ul"));e.forEach(function(e){n(e,"is-active")&&i(e,"is-active")}),t.forEach(function(e){n(e,"is-active")&&i(e,"is-active")})},Ut=function(e){a(e.querySelector("ul"),"is-active")},Kt=function(){Array.apply(void 0,document.querySelectorAll(".toc a")).forEach(function(e){e.addEventListener("click",function(e){var t=e.target.parentNode,r=t.parentNode.parentNode;E.emit("toc:toggle",t),E.emit("toc:toggle",r)})}),Array.apply(void 0,document.querySelectorAll(".toc ul li ul")).forEach(function(e){e.addEventListener("click",function(e){E.emit("toc:close")})})},Xt=function(){E.on("toc:bind",Kt),E.on("toc:toggle",Ut),E.on("toc:close",Gt),E.on("keyboard:escape",Gt),E.on("drawer:close",Gt),E.on("keyboard:arrow:left",Gt),E.emit("toc:bind")};!function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]);var $t=function(){console.debug("App init started"),G(),N(),l(),v(),g(),gt(),S(),zt(),Zt(),R(),Xt(),console.debug("App init finished")};console.debug("We are loading our goodness"),E.on("has:javascript",$t),function(){E.emit("has:javascript")}()}();