!function(){"use strict";function t(t,e){var n;for(n=e;n&&(1!==n.nodeType||!o(n,t));n=n.parentNode);return n}function e(t){return Array.isArray(t)?t:Array.prototype.slice.call(t)}function n(t,n){return e((n||document).querySelectorAll(t))}function o(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.getAttribute("class"))}function r(t,e){e.split(" ").forEach(function(e){o(t,e)||t.setAttribute("class",t.getAttribute("class")+" "+e)})}function i(t,e){e.split(" ").forEach(function(e){var n=t.getAttribute("class").replace(new RegExp("(\\s|^)"+e+"(\\s|$)","g"),"$2");o(t,e)&&t.setAttribute("class",n)})}function s(t,e){o(t,e)?i(t,e):r(t,e)}function a(t){(t=e(t)).forEach(function(t){i(t,"is-active")})}function c(){}function u(){i(document.querySelector("html"),"js-is-inactive")}function l(){var t=document.location.pathname+"/";"/map/"===(t=t.replace("//","/"))?E.emit("set:view","map"):"/text/"===t?E.emit("set:view","text"):E.emit("set:view","split"),E.emit("routing:done")}function p(){return"click"}function d(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):void 0}function h(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):void 0}function f(t){if(t.preventDefault)return t.preventDefault();t.returnValue&&(t.returnValue=!1)}function m(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop)}while(t=t.offsetParent);return e}function w(t){t.forEach(function(t){t&&t.setAttribute("aria-hidden",!0)})}function y(t){t.forEach(function(t){t&&t.removeAttribute("aria-hidden")})}function v(){function e(){return[]}function s(t){if(E.emit("modal:close"),t){var n=document.querySelector('.js-modal[data-modal="'+t+'"]');n.removeAttribute("tabindex"),d(document,"focusin",l),r(n,"is-active"),w(e()),n.focus()}}function c(t){if(!t)return a(b);var n=document.querySelector('.js-modal[data-modal="'+t+'"]');i(n,"is-active"),n.setAttribute("tabindex",0),h(document,"focusin",l),y(e())}function u(t){t?d(t,p(),m):v.forEach(function(t){d(t,p(),m)})}function l(e){t("js-modal",e.target)||b.forEach(function(t){o(t,"is-active")&&t.focus()})}function m(t){f(t);var e=t.target.dataset.modal;E.emit("modal:open",e)}var v=n(".js-modal-toggle"),b=n(".js-modal");E.on("modal:open",s),E.on("keyboard:escape",c),E.on("modal:close",c),E.on("modal:bind",u),E.emit("modal:bind")}function b(){function e(t){E.emit("drawer:close");var e=document.querySelector('.js-drawer[data-drawer="'+t.id+'"]');if(e){var n=o(e,"drawer-right"),i=o(e,"drawer-left");e.setAttribute("tabindex",0),r(e,"is-active"),n?r(v,"drawer-right-is-active"):i&&r(v,"drawer-left-is-active"),w([v]),d(e,p(),u),d(document,"focusin",a)}}function s(t){if(t){var e=document.querySelector('.js-drawer[data-drawer="'+t.id+'"]');e.removeAttribute("tabindex"),i(e,"is-active")}else g.forEach(function(t){t.removeAttribute("tabindex"),i(t,"is-active")});i(v,"drawer-left-is-active"),i(v,"drawer-right-is-active"),b.forEach(function(t){i(t,"is-active")}),y([v]),h(document,"focusin",a),m&&m.focus()}function a(e){t("js-drawer",e.target)||g.forEach(function(t){o(t,"is-active")&&t.focus()})}function c(t){t?d(t.node,p(),l):b.forEach(function(t){d(t,p(),l)})}function u(t){o(t.target,"js-drawer")&&E.emit("drawer:close"),o(t.target,"js-drawer-close")&&E.emit("drawer:close")}function l(t){f(t);var e=t.target.getAttribute("data-drawer");r(t.target,"is-active"),E.emit("drawer:open",{id:e})}var m,v=document.querySelector(".js-panels"),b=n(".js-drawer-toggle"),g=n(".js-drawer");E.on("drawer:open",e),E.on("keyboard:escape",s),E.on("drawer:close",s),E.on("drawer:bind",c),E.emit("drawer:bind")}function g(t){return Ut.startTag+t+Ut.endTag}function T(t,e){var n=t.split(" ");n=(n=(n=n.filter(function(t){return""!==t})).join("|")).replace(/[-[\]{}()*+?.,\\^$]/g,"\\$&");var o=new RegExp(n,"gi");return e.replace(o,g)}function S(){E.on("search:index",Zt),E.on("search:bind",Jt),E.on("search:for",te),E.on("search:render",ee),E.on("search:cancel",ne),E.on("search:for",Xt),E.on("search:result",re),E.emit("search:index"),E.emit("search:bind")}c.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){r.off(t,o),e.apply(n,arguments)}var r=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;for(o;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,s=o.length;i<s;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}};var E=new c;E.on("has:javascript",u);"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var P=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(e,n){t.exports=function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var o=n(1).isInBrowser,r=new(n(2))(o?document.body:null);r.setStateFromDOM(null),r.listenToDOM(),o&&(window.scrollMonitor=r),t.exports=r},function(t,e){e.VISIBILITYCHANGE="visibilityChange",e.ENTERVIEWPORT="enterViewport",e.FULLYENTERVIEWPORT="fullyEnterViewport",e.EXITVIEWPORT="exitViewport",e.PARTIALLYEXITVIEWPORT="partiallyExitViewport",e.LOCATIONCHANGE="locationChange",e.STATECHANGE="stateChange",e.eventTypes=[e.VISIBILITYCHANGE,e.ENTERVIEWPORT,e.FULLYENTERVIEWPORT,e.EXITVIEWPORT,e.PARTIALLYEXITVIEWPORT,e.LOCATIONCHANGE,e.STATECHANGE],e.isOnServer="undefined"==typeof window,e.isInBrowser=!e.isOnServer,e.defaultOffsets={top:0,bottom:0}},function(t,e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return c?0:t===document.body?window.innerHeight||document.documentElement.clientHeight:t.clientHeight}function i(t){return c?0:t===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):t.scrollHeight}function s(t){return c?0:t===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop}var a=n(1),c=a.isOnServer,u=a.isInBrowser,l=a.eventTypes,p=n(3),d=function(){function t(e,n){function a(){if(u.viewportTop=s(e),u.viewportBottom=u.viewportTop+u.viewportHeight,u.documentHeight=i(e),u.documentHeight!==p){for(d=u.watchers.length;d--;)u.watchers[d].recalculateLocation();p=u.documentHeight}}function c(){for(h=u.watchers.length;h--;)u.watchers[h].update();for(h=u.watchers.length;h--;)u.watchers[h].triggerCallbacks()}o(this,t);var u=this;this.item=e,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=i(e),this.viewportHeight=r(e),this.DOMListener=function(){t.prototype.DOMListener.apply(u,arguments)},this.eventTypes=l,n&&(this.containerWatcher=n.create(e));var p,d,h;this.update=function(){a(),c()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return t.prototype.listenToDOM=function(){u&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener):this.item.addEventListener("scroll",this.DOMListener),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},t.prototype.destroy=function(){},t.prototype.DOMListener=function(t){this.setStateFromDOM(t)},t.prototype.setStateFromDOM=function(t){var e=s(this.item),n=r(this.item),o=i(this.item);this.setState(e,n,o,t)},t.prototype.setState=function(t,e,n,o){var r=this,i=e!==this.viewportHeight||n!==this.contentHeight;if(this.latestEvent=o,this.viewportTop=t,this.viewportHeight=e,this.viewportBottom=t+e,this.contentHeight=n,i)for(var s=this.watchers.length;s--;)r.watchers[s].recalculateLocation();this.updateAndTriggerWatchers(o)},t.prototype.updateAndTriggerWatchers=function(t){for(var e=this,n=this.watchers.length;n--;)e.watchers[n].update();for(n=this.watchers.length;n--;)e.watchers[n].triggerCallbacks(t)},t.prototype.createCustomContainer=function(){return new t},t.prototype.createContainer=function(e){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var n=new t(e,this);return n.setStateFromDOM(),n.listenToDOM(),n},t.prototype.create=function(t,e){"string"==typeof t?t=document.querySelector(t):t&&t.length>0&&(t=t[0]);var n=new p(this,t,e);return this.watchers.push(n),n},t.prototype.beget=function(t,e){return this.create(t,e)},t}();t.exports=d},function(t,e,n){function o(t,e,n){function o(t,e){if(0!==t.length)for(g=t.length;g--;)(T=t[g]).callback.call(r,e,r),T.isOne&&t.splice(g,1)}var r=this;this.watchItem=e,this.container=t,this.offsets=n?n===+n?{top:n,bottom:n}:{top:n.top||h.top,bottom:n.bottom||h.bottom}:h,this.callbacks={};for(var f=0,m=d.length;f<m;f++)r.callbacks[d[f]]=[];this.locked=!1;var w,y,v,b,g,T;this.triggerCallbacks=function(t){switch(this.isInViewport&&!w&&o(this.callbacks[s],t),this.isFullyInViewport&&!y&&o(this.callbacks[a],t),this.isAboveViewport!==v&&this.isBelowViewport!==b&&(o(this.callbacks[i],t),y||this.isFullyInViewport||(o(this.callbacks[a],t),o(this.callbacks[u],t)),w||this.isInViewport||(o(this.callbacks[s],t),o(this.callbacks[c],t))),!this.isFullyInViewport&&y&&o(this.callbacks[u],t),!this.isInViewport&&w&&o(this.callbacks[c],t),this.isInViewport!==w&&o(this.callbacks[i],t),!0){case w!==this.isInViewport:case y!==this.isFullyInViewport:case v!==this.isAboveViewport:case b!==this.isBelowViewport:o(this.callbacks[p],t)}w=this.isInViewport,y=this.isFullyInViewport,v=this.isAboveViewport,b=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var t=this.top,e=this.bottom;if(this.watchItem.nodeName){var n=this.watchItem.style.display;"none"===n&&(this.watchItem.style.display="");for(var r=0,i=this.container;i.containerWatcher;)r+=i.containerWatcher.top-i.containerWatcher.container.viewportTop,i=i.containerWatcher.container;var s=this.watchItem.getBoundingClientRect();this.top=s.top+this.container.viewportTop-r,this.bottom=s.bottom+this.container.viewportTop-r,"none"===n&&(this.watchItem.style.display=n)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===t&&void 0===e||this.top===t&&this.bottom===e||o(this.callbacks[l],null)}},this.recalculateLocation(),this.update(),w=this.isInViewport,y=this.isFullyInViewport,v=this.isAboveViewport,b=this.isBelowViewport}var r=n(1),i=r.VISIBILITYCHANGE,s=r.ENTERVIEWPORT,a=r.FULLYENTERVIEWPORT,c=r.EXITVIEWPORT,u=r.PARTIALLYEXITVIEWPORT,l=r.LOCATIONCHANGE,p=r.STATECHANGE,d=r.eventTypes,h=r.defaultOffsets;o.prototype={on:function(t,e,n){switch(!0){case t===i&&!this.isInViewport&&this.isAboveViewport:case t===s&&this.isInViewport:case t===a&&this.isFullyInViewport:case t===c&&this.isAboveViewport&&!this.isInViewport:case t===u&&this.isInViewport&&this.isAboveViewport:if(e.call(this,this.container.latestEvent,this),n)return}if(!this.callbacks[t])throw new Error("Tried to add a scroll monitor listener of type "+t+". Your options are: "+d.join(", "));this.callbacks[t].push({callback:e,isOne:n||!1})},off:function(t,e){var n=this;if(!this.callbacks[t])throw new Error("Tried to remove a scroll monitor listener of type "+t+". Your options are: "+d.join(", "));for(var o,r=0;o=this.callbacks[t][r];r++)if(o.callback===e){n.callbacks[t].splice(r,1);break}},one:function(t,e){this.on(t,e,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var t=this.container.watchers.indexOf(this),e=this;this.container.watchers.splice(t,1);for(var n=0,o=d.length;n<o;n++)e.callbacks[d[n]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var f=0,m=d.length;f<m;f++){var w=d[f];o.prototype[w]=function(t){return function(e,n){this.on.call(this,t,e,n)}}(w)}t.exports=o}])}()}()}),M=function(){function t(t){E.emit("layers:draw")}n(".js-layer-toggle").forEach(function(e){d(e,"click",t)})},A=function(){function t(t){t.preventDefault(),E.emit("layer:control")}n(".js-layer-control").forEach(function(e){d(e,"click",t)})},k=function(){function t(t){t.preventDefault();var e=t.target.getAttribute("data-panel");E.emit("set:view",e)}n(".js-view-control").forEach(function(e){d(e,"click",t)})},C=function(){function t(t){t.preventDefault(),E.emit("popup:close")}n(".js-close-popup").forEach(function(e){d(e,"click",t)})},I=function(){function t(t){27===t.keyCode?E.emit("keyboard:escape"):13===t.keyCode?E.emit("keyboard:return"):32===t.keyCode?E.emit("keyboard:space"):38===t.keyCode?E.emit("keyboard:arrow:up"):40===t.keyCode?E.emit("keyboard:arrow:down"):37===t.keyCode?E.emit("keyboard:arrow:left"):39===t.keyCode?E.emit("keyboard:arrow:right"):9===t.keyCode&&E.emit("keyboard:tab")}d(document,"keyup",t)},N=function(){function t(){var t=e.offsetWidth;t>785?E.emit("type:size","large"):t>599?E.emit("type:size","medium"):t<600&&E.emit("type:size","small")}window.onresize=t;var e=document.querySelector(".js-text-area")},j=function(){E.emit("bind:layer:toggles"),E.emit("bind:layer:controllers"),E.emit("bind:view:controller"),E.emit("bind:scroll:watcher"),E.emit("bind:popup:closers"),E.emit("bind:keyup"),E.emit("bind:window:resize")},O=function(){E.on("bind:layer:toggles",M),E.on("bind:layer:controllers",A),E.on("bind:view:controller",k),E.on("bind:popup:closers",C),E.on("bind:keyup",I),E.on("bind:window:resize",N),E.on("bind:intent",j),E.emit("bind:intent")};Math.easeInOutQuad=function(t,e,n,o){return(t/=o/2)<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)},Math.easeInCubic=function(t,e,n,o){return e+n*((t/=o)*t*t)},Math.inOutQuintic=function(t,e,n,o){var r=(t/=o)*t,i=r*t;return e+n*(6*i*r+-15*r*r+10*i)};var B,_=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),V=function(t,e,n,o){function r(e){t.scrollTop=e}var i=function(){return t.scrollTop}(),s=e-i,a=0;o=void 0===o?500:o;var c=function(){a+=20,r(Math.easeInOutQuad(a,i,s,o)),a<o?_(c):n&&"function"==typeof n&&n()};c()},R=function(t){void 0===t&&(t=document);var e=document.querySelector(".js-text-area");Array.apply(void 0,t.querySelectorAll("a")).filter(function(t){return"#"==t.attributes.href.value.charAt(0)}).forEach(function(t){var n=t.attributes.href.value;t.addEventListener("click",function(t){t.preventDefault(),console.log(n);var o=m(document.querySelector(n))-60;V(e,o)})})},D=function(t,e){var n=document.querySelector(".js-pop-up"),o=document.querySelector(".js-template");r(n,"is-active"),t.feature?o.innerHTML=e(t.feature.properties):o.innerHTML=e(t.features[0].properties),R(o)},H=function(){i(document.querySelector(".js-pop-up"),"is-active"),E.emit("popup:closed")},x=function(t){var e=document.querySelector(".js-panels");o(e,"text-is-active")&&i(e,"text-is-active"),o(e,"map-is-active")&&i(e,"map-is-active"),o(e,"split-is-active")&&i(e,"split-is-active"),r(e,t+"-is-active"),"map"===t|"split"===t&&W()},z=function(t){"split"===t&&(t="/"),window.history.replaceState&&window.history.replaceState(null,null,t)},q=function(){var t=document.querySelector(".js-layer-control-panel"),e=document.querySelector(".js-layer-control");s(t,"is-active"),s(e,"is-active")},F=function(){},W=function(){setTimeout(function(){E.emit("map:redraw")},300)},G=function(){i(document.querySelector("html"),"is-loading")},U=function(){E.on("set:view",x),E.on("set:view",z),E.on("layer:control",q),E.on("keyboard:escape",F),E.on("keyboard:escape",H),E.on("popup:opened",D),E.on("popup:close",H),E.on("popup:leafletclosed",H),E.on("routing:done",G)},Y={Design:{CIMS:"Civic Main Streets",NMS:"Neighborhood Main Streets",CIC:"Civic Corridors",NC:"Neighborhood Corridors",RC:"Regional Corridors",CC:"Community Corridors",UT:"Urban Throughways",IR:"Industrial Roads",EGC:"Enhanced Greenway Corridors",GS:"Greenscape Streets",LS:"Local Streets","N/A":"No Class",UNK:"Unknown"},Bicycle:{MCB:"Major City Bikeways",CB:"City Bikeways",LS:"Local Service Bikeways",BD:"Bicycle Districts",OSP:"Off-Street Paths","N/A":"No Class",UNK:"Unknown"},Transit:{RT:"Regional Transitways",RTMTP:"Major Transit Priority Streets",TA:"Transit Access Streets",LS:"Local Service Transit Streets",IPR:"Intercity Passenger Rail","N/A":"No Class",UNK:"Unknown"},Traffic:{RTMCT:"Regional Trafficways",MCT:"Major City Traffic Streets",TA:"Traffic Access Streets",DC:"District Collectors",NC:"Neighborhood Collectors",LS:"Local Service Traffic Streets","N/A":"No Class",UNK:"Unknown"},Emergency:{MAJ:"Major Emergency Response Streets",MIN:"Minor Emergency Response Streets",PRIMARY:"Secondary Emergency Response Streets",SECOND:"Secondary Emergency Response Streets","N/A":"No Class",UNK:"Unknown"},Pedestrian:{PD:"Pedestrian Districts",CCTP:"Pedestrian-Transit Streets",CW:"City Walkways",OSP:"Off-Street Paths",LS:"Local Service Walkways","N/A":"No Class",UNK:"Unknown"},Freight:{RT:"Regional Truckways",PT:"Priority Truck Streets",MT:"Major Truck Streets",TA:"Truck Access Streets",LS:"Local Service Truck Streets",FD:"Freight Districts",RML:"Railroad Main Lines",RBL:"Railroad Branch Lines",FF:"Freight Facilities","N/A":"No Class",UNK:"Unknown"}},Z=function(t,e){return function(e){return'\n      <h5 class="flush-top">\n        '+e.StreetName+'\n      </h5>\n      <table class="flush-bottom lead-top">\n        <tbody>\n          <tr>\n            <td>'+t+' Class:</td>\n            <td><a href="#'+Y[t][e[t]].replace(/ /g,"-").toLowerCase()+'">'+e[t]+'</a></td>\n          </tr>\n        </tbody>\n      </table>\n      <p class="lead-top">\n        <b>'+e[t]+':</b>\n        <a href="#'+Y[t][e[t]].replace(/ /g,"-").toLowerCase()+'">'+Y[t][e[t]]+"</a>\n      </p>\n    "}},K=function(t,e){return function(n){return console.log(n),console.log(t),'\n      <h5 class="flush-top">\n        '+t+' District\n      </h5>\n      <table class="flush-bottom lead-top">\n        <tbody>\n          <tr>\n            <td>'+t+' Class:</td>\n            <td><a href="#'+Y[t][e].replace(/ /g,"-").toLowerCase()+'">'+e+"</a></td>\n          </tr>\n        </tbody>\n      </table>\n    "}},X=function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},$=function(t,e){return function(t){return console.debug("nice feature:",t),'\n      <h5 class="flush-top">\n        '+t.ProjectName+"\n      </h5>\n      <p> "+t.ProjectDescription+' </p>\n      <table class="lead-bottom lead-top">\n        <tbody>\n          <tr>\n            <td>Status</td>\n            <td>'+t.ProjectStatus+"</td>\n          </tr>\n          <tr>\n            <td>Lead Agency</td>\n            <td>"+t.LeadAgency+"</td>\n          </tr>\n          <tr>\n            <td>Estimated Cost</td>\n            <td>$"+X(t.EstimatedCost)+"</td>\n          </tr>\n          <tr>\n            <td>Estimated Time Frame</td>\n            <td>"+t.EstimatedTimeframe+"</td>\n          </tr>\n        </tbody>\n      </table>\n      <p>Project Number: "+t.ProjectNumber+"</p>\n    "}},Q={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[10]}),pane:"top",popup:Z("Design")},J={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[12]}),popup:Z("Bicycle")},tt={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[13],style:function(t){return{fillOpacity:.5}}}),popup:K("Bicycle","BD")},et={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[3]}),pane:"top",popup:Z("Transit")},nt={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[4]}),pane:"top",popup:Z("Traffic")},ot={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[7]}),pane:"top",popup:Z("Emergency")},rt={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[15],pane:"top"}),pane:"top",popup:Z("Pedestrian")},it={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[16],pane:"bottom",style:function(t){return{fillOpacity:.5}}}),pane:"bottom",popup:K("Pedestrian","PD")},st={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[19]}),popup:Z("Freight")},at={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[20],style:function(t){return{fillOpacity:.5}}}),popup:K("Freight","FD")},ct={features:window.L.esri.dynamicMapLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Transportation_System_Plan/MapServer",layers:[18]}),popup:Z("Freight")},ut={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Proposal_Archive/MapServer/1",pane:"top"}),pane:"top",popup:$()},lt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Proposal_Archive/MapServer/5",pane:"top"}),pane:"top",popup:$()},pt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Proposal_Archive/MapServer/6",pane:"bottom",style:function(t){return{fillOpacity:.2}}}),pane:"bottom",popup:$()},dt={features:window.L.esri.featureLayer({url:"https://services.arcgis.com/quVN97tn06YNGj9s/arcgis/rest/services/TSPBikePrograms_temp_2018_03_15/FeatureServer/0",pane:"bottom"}),popup:$()},ht={features:window.L.esri.featureLayer({url:"https://services.arcgis.com/quVN97tn06YNGj9s/arcgis/rest/services/TSPBikePrograms_temp_2018_03_15/FeatureServer/1",pane:"bottom"}),popup:$()},ft={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Basemap_Color/MapServer/8",pane:"bottom",style:function(t){return{fillOpacity:.2}}}),popup:function(t,e){return function(t){return console.log(t),'\n      <h5 class="flush-top">\n        '+t.SITEADDR+"\n      </h5>\n    "}}()},mt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/Zoning/MapServer/0",pane:"bottom",style:function(t){return{fillOpacity:.2}}}),popup:function(t,e){return function(t){return console.log(t),'\n      <h5 class="flush-top">\n        '+t.CMP+'\n      </h5>\n      <p class="flush-bottom">\n        <b>Zone:</b>\n        '+t.CMP_DESC+"\n      </p>\n      <p>\n        <b>Overlay:</b>\n        "+(t.OVRLY_DESC||"None")+'\n      </p>\n      <p class="lead-bottom">\n\n      </p>\n    '}}()},wt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/46",pane:"bottom",style:function(t){return{fillOpacity:.2}}}),popup:function(t,e){return function(t){return'\n      <h5 class="flush-top">\n        '+t.NAME+"\n      </h5>\n    "}}()},yt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/44",pane:"bottom"}),popup:function(t,e){return function(t){return'\n      <h5 class="flush-top">\n        '+t.LOCATION+"\n      </h5>\n    "}}()},vt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/2",pane:"bottom"}),popup:$()},bt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/3",pane:"bottom"}),popup:$()},gt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/4",pane:"bottom"}),popup:$()},Tt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/5",pane:"bottom"}),popup:$()},Lt={features:window.L.esri.featureLayer({url:"https://www.portlandmaps.com/arcgis/rest/services/Public/BPS_Thematic_Layers/MapServer/6",pane:"bottom"}),popup:$()},St=Object.freeze({Design:Q,BicycleClassifications:J,BicycleDistricts:tt,Transit:et,Traffic:nt,Emergency:ot,PedestrianClassifications:rt,PedestrianDistricts:it,FreightClassifications:st,FreightDistricts:at,FreightFacilities:ct,ProjectPoints:ut,ProjectLines:lt,ProjectPolygons:pt,bikeProgram:dt,greenwayProgram:ht,taxlots:ft,zoning:mt,centers:wt,corridors:yt,centersRegional:vt,centersTown:bt,centersNeighborhood:gt,corridorsCivic:Tt,corridorsNeighborhood:Lt}),Et={center:[45.528,-122.63],zoom:12},Pt=L.Control.Zoom.extend({options:{position:"topright",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"Zoom min",zoomMinTitle:"Zoom min"},onAdd:function(t){var e="leaflet-control-zoom",n=L.DomUtil.create("div",e+" leaflet-bar"),o=this.options;return this._map=t,this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._zoomMinButton=this._createButton(o.zoomMinText,o.zoomMinTitle,e+"-min",n,this._zoomMin,this),n},_zoomMin:function(){this._map.flyTo(Et.center,Et.zoom)}}),Mt={center:[45.528,-122.63],zoom:12},At=function(){console.debug("begin draw map"),B=window.L.map("map",{trackResize:!0,center:Mt.center,minZoom:12,zoom:Mt.zoom,zoomControl:!1,scrollWheelZoom:!0}),console.debug("created map",B),B.createPane("bottom"),B.createPane("top"),console.debug("plz add basemap"),window.L.esri.basemapLayer("Gray").addTo(B),console.debug("added basemap"),B.on("moveend",function(){Mt.center=B.getCenter(),Mt.zoom=B.getZoom()}),kt(),B.on("click",function(t){console.debug("map click:",t)})},kt=function(){B.addControl(new Pt);window.L.esri.Geocoding.geocodeServiceProvider({url:"https://www.portlandmaps.com/locator/Default/GeocodeServer"});var t=L.esri.Geocoding.geosearch({position:"topright",zoomToResult:!0,allowMultipleResults:!1,searchBounds:L.latLngBounds([[45.6574694,-122.8695448],[45.3309588,-122.4284356]])}).addTo(B),e=L.layerGroup().addTo(B);t.on("results",function(t){e.clearLayers(),e.addLayer(L.marker(t.results[0].latlng)),B.setZoom(0),Mt.zoom=0})},Ct=function(){return n(".js-layer-toggle").filter(function(t){return t.checked})},It=function(){return n(".js-layer-toggle").filter(function(t){return!t.checked})},Nt=function(t){t&&(t=t.replace(/ /g,"")).split(",").forEach(function(t){return jt(t)})},jt=function(t){St[t]&&(St[t].features.addTo(B),E.emit("layer:reset",t),console.debug("This is a set of features for layer "+t+":",St[t].features),St[t].features.bindPopup(function(e,n){return console.debug("this is a very nice popup bind",e,n),e&&(e.feature?n=e:e=e),n&&Ot(n,t),"hey"}).on("popupclose",function(){E.emit("layer:reset",t)}))},Ot=function(t,e){E.emit("popup:opened",t,St[e].popup)},Bt=function(t){St[t].features.resetStyle&&St[t].features.resetStyle()},_t=function(t){t&&(t=t.replace(/ /g,"")).split(",").forEach(function(t){return Vt(t)})},Vt=function(t){St[t]&&(St[t].features.removeFrom(B),St[t].features.unbindPopup())},Rt=function(){var t=Ct();E.emit("map:legend",t),t.forEach(function(t){var e=t.getAttribute("data-layers");E.emit("map:layer:add",e)}),It().forEach(function(t){var e=t.getAttribute("data-layers");E.emit("map:layer:remove",e)})},Dt=function(){B&&B.remove()},Ht=function(){E.emit("map:destroy"),E.emit("map:create")},xt=function(){B.closePopup()},zt=function(t){B.fitBounds(t)},qt=function(t,e){B.flyTo(t,e),Mt.zoom=e},Ft=function(t){},Wt=function(t){var e=document.querySelector(".js-legend");e.innerHTML="Viewing:",(t=t.filter(function(t){return null!=t.getAttribute("data-layers")})).forEach(function(t){e.insertAdjacentHTML("beforeend",'\n      <span class="legend-layer">\n        '+t.getAttribute("data-layers")+",\n      </span>\n    ")}),t.length<1&&e.insertAdjacentHTML("beforeend","None")},Gt=function(){console.debug("Bind map events"),E.on("popup:opened",Ft),E.on("popup:closed",xt),E.on("map:redraw",Ht),E.on("map:destroy",Dt),E.on("map:create",At),E.on("map:create",Rt),E.on("map:fitBounds",zt),E.on("map:setFeature",qt),E.on("layers:draw",Rt),E.on("map:layer:add",Nt),E.on("map:layer:remove",_t),E.on("layer:reset",Bt),E.on("map:legend",Wt)},Ut={startTag:"<b class='highlight'>",endTag:"</b>"},Yt=T;String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)});var Zt=function(){window.content=[];var t=document.querySelector(".js-search-content"),n=e(t.getElementsByTagName("h1")),o=e(t.getElementsByTagName("h2")),r=e(t.getElementsByTagName("h3")),i=e(t.getElementsByTagName("h4")),s=e(t.getElementsByTagName("h5")),a=e(t.getElementsByTagName("h6"));e(t.getElementsByTagName("p"));window.content=window.content.concat(n),window.content=window.content.concat(o),window.content=window.content.concat(r),window.content=window.content.concat(i),window.content=window.content.concat(s),window.content=window.content.concat(a)},Kt=function(t,e){return!!t.innerHTML&&!!t.innerHTML.toLowerCase().includes(e)},Xt=function(t){t=t.toLowerCase();var e=window.content.filter(function(e){return Kt(e,t)});E.emit("search:result",e.length,e,t)},$t=function(t){f(t);var e=n(".js-search-input",t.target.parentNode)[0].value;E.emit("search:for",e)},Qt=function(t){f(t),n(".js-search-input",t.target.parentNode)[0].value="",E.emit("search:cancel")},Jt=function(){var t=n(".js-search-submit"),e=n(".js-search-cancel");t.map(function(t){d(t,"click",$t)}),e.map(function(t){d(t,"click",Qt)})},te=function(){var t=n(".js-search-loader"),e=n(".js-search-hide"),o=n(".js-search-results");e.forEach(function(t){r(t,"is-hidden")}),t.forEach(function(t){r(t,"is-active")}),o.forEach(function(t){i(t,"is-active")})},ee=function(){var t=n(".js-search-loader"),e=n(".js-search-hide"),o=n(".js-search-results");e.forEach(function(t){r(t,"is-hidden")}),t.forEach(function(t){i(t,"is-active")}),o.forEach(function(t){r(t,"is-active")})},ne=function(){var t=n(".js-search-loader"),e=n(".js-search-hide"),o=n(".js-search-results");e.forEach(function(t){i(t,"is-hidden")}),t.forEach(function(t){i(t,"is-active")}),o.forEach(function(t){i(t,"is-active")})};window.scrollToPosition=function(t){var e=document.querySelector(".js-text-area");V(e,t-60)};var oe=function(t){for(var e;"H"!=t.tagName[0];)e=t,(t=t.previousElementSibling)||(t=e.parentNode);return t.innerHTML},re=function(t,e,o){var r=n(".js-search-results");document.querySelector(".js-search-content");r.map(function(n){n.innerHTML='\n      <h6 class="search-result-summary">'+t+" results for '"+o+"'</h6>\n    ",e.map(function(t){var e=oe(t),r=m(t),i=t.innerHTML,s=Yt(o,i);n.insertAdjacentHTML("beforeend",'\n        <a class="search-result" onclick="scrollToPosition('+r+')">\n          <h6 class="search-result-header">'+e+'</h6>\n          <p class="search-result-preview">'+s+"</p>\n        </a>\n      ")})}),E.emit("search:render")},ie=document.querySelector(".js-text-area"),se=e(ie.getElementsByTagName("h1")),ae=(document.querySelector(".js-chapter-nubs"),document.querySelector(".js-nub-list")),ce=P.createContainer(ie),ue={},le=function(){se.forEach(function(t){ue[t.id]=ce.create(t),ue[t.id].enterViewport(function(){E.emit("nubs:active",t.id),E.emit("breadscrumbs:active",t)})})},pe=function(t){return'\n    <li>\n      <a href="#'+t.href+'"\n         data-nub="'+t.href+'"\n         class="nub\n                js-nub\n                tooltip tooltip-right"\n         aria-label="'+t.text+'">\n      </a>\n    </li>\n  '},de=function(){e(ie.getElementsByTagName("h1")).map(function(t){return{href:t.id,text:t.innerHTML}}).forEach(function(t){var e=pe(t);ae&&ae.insertAdjacentHTML("beforeend",e)}),E.emit("nubs:active","top")},he=function(t){ae&&e(ae.querySelectorAll(".js-nub")).forEach(function(e){i(e,"is-active"),e.getAttribute("data-nub")===t&&r(e,"is-active")})},fe=function(){E.on("nubs:draw",de),E.on("nubs:draw",le),E.on("nubs:active",he),E.emit("nubs:draw")},me=document.querySelector(".js-breadcrumbs"),we=function(t){var e='\n    <span class="pt8 nav-top-link">></span>\n    <a href=\'#'+t.id+'\' class="crumb nav-top-link pt10">\n      '+t.innerHTML+"\n    </a>\n  ";me.innerHTML="",me.insertAdjacentHTML("beforeend",e)},ye=function(){E.on("breadscrumbs:active",we)},ve=function(){var t=Array.apply(void 0,document.querySelectorAll(".toc ul li ul")),e=Array.apply(void 0,document.querySelectorAll(".toc ul"));t.forEach(function(t){o(t,"is-active")&&i(t,"is-active")}),e.forEach(function(t){o(t,"is-active")&&i(t,"is-active")})},be=function(t){s(t.querySelector("ul"),"is-active")},ge=function(){Array.apply(void 0,document.querySelectorAll(".toc a")).forEach(function(t){t.addEventListener("click",function(t){var e=t.target.parentNode,n=e.parentNode.parentNode;E.emit("toc:toggle",e),E.emit("toc:toggle",n)})}),Array.apply(void 0,document.querySelectorAll(".toc ul li ul")).forEach(function(t){t.addEventListener("click",function(t){E.emit("toc:close")})})},Te=function(){E.on("toc:bind",ge),E.on("toc:toggle",be),E.on("toc:close",ve),E.on("keyboard:escape",ve),E.on("drawer:close",ve),E.on("keyboard:arrow:left",ve),E.emit("toc:bind")},Le=function(){console.debug("App init started"),U(),O(),l(),v(),b(),Gt(),S(),fe(),ye(),R(),Te(),console.debug("App init finished")};console.debug("We are loading our goodness"),E.on("has:javascript",Le),function(){E.emit("has:javascript")}()}();